/*
 *
 * Module: Door locking control application.
 *
 * File Name: door_locking_control.c
 *
 * Description: Source file of controlMCU application.
 *
 * Author: Mohamed Khaled.
 *
 */
#define F_CPU 8000000

#include "uart.h"
#define HMI_MCU_READY 0xff
#define CONTROL_MCU_READY 0xcc

#define COMPARE_RESULT_TRUE 0x01
#define COMPARE_RESULT_FALSE 0x00

int main ( void )
{
	UART_init(9600);

	uint8 password[5];
	uint8 reEnteredPassword[5];

	//	while(UART_recieveByte() != HMI_MCU_READY);
	//
	//	/* Receiving password */
	//	for (uint8 i = 0; i < 5; i++)
	//	{
	//		password[i] = UART_recieveByte();
	//	}
	//	/* Receiving reentered password */
	//	for (uint8 i = 0; i < 5; i++)
	//	{
	//		reEnteredPassword[i] = UART_recieveByte();
	//	}
	//	boolean result = COMPARE_RESULT_TRUE;
	//	/* Comparing passwords*/
	//	for (uint8 i = 0; i < 5; i++)
	//	{
	//		if(password[i] != reEnteredPassword[i])
	//		{
	//			result = COMPARE_RESULT_FALSE;
	//			break;
	//		}
	//	}
	//	while(UART_recieveByte() != CONTROL_MCU_READY);
	//
	//	UART_sendByte(result);

	UART_sendByte(CONTROL_MCU_READY);
	password[0] = UART_recieveByte();
//	reEnteredPassword[0] = UART_recieveByte();
//	uint8 result;
//	if(password[0] != reEnteredPassword[0])
//	{
//		result = COMPARE_RESULT_FALSE;
//	}
//	else
//	{
//		result = COMPARE_RESULT_TRUE;
//	}
	while(UART_recieveByte() != CONTROL_MCU_READY);
	UART_sendByte(password[0]);
	return 0;
}
